# راهنمای سریع برای تازه‌واردها (Junior Onboarding)

## 1) راه‌اندازی سریع
- Node 20+ و npm داشته باشید.
- نصب: `npm install`
- اجرای dev (با دادهٔ ساختگی):  
  - `.env.local` را مثل `.env.example` تنظیم کنید و `NEXT_PUBLIC_USE_MOCKS=true` بگذارید.  
  - `npm run dev` → اپ در `http://localhost:3000`
- اتصال به بک‌اند واقعی: `NEXT_PUBLIC_USE_MOCKS=false` و `NEXT_PUBLIC_API_BASE` / `API_PROXY_ORIGIN` را به آدرس سرور خود بگذارید؛ سپس `npm run dev`.

## 2) ساختار پوشه‌ها (آنچه بیشتر نیاز دارید)
- `src/app/` صفحات Next.js (App Router). مسیرهای محافظت‌شده در `(protected)/`.
- `src/components/` مولفه‌های UI و چیدمان (سایدبار، تاپ‌بار، کارت، ورودی‌ها و…).
- `src/services/` لایهٔ داده (API یا موک) برای auth، پروژه، برنامه‌ریز، پومودورو، تایمر، تیم، صوت.
- `src/lib/api.ts` پیکربندی axios و فلگ `USE_MOCKS`.
- `src/lib/mockData.ts` دادهٔ ساختگی در حافظه برای کار بدون بک‌اند.
- `src/i18n/` ترجمه و جهت راست‌به‌چپ.
- `src/config/nav.ts` لینک‌ها و آیکون‌های ناوبری.

## 3) الگوی داده/درخواست
- از React Query در `src/app/providers.tsx` استفاده می‌شود (QueryClientProvider).
- همه سرویس‌ها `USE_MOCKS` را چک می‌کنند: وقتی `true` است از `mockData` وگرنه از API واقعی.
- درخواست‌ها با axios (baseURL از `.env`) و `withCredentials: true` برای کوکی‌ها.

## 4) احراز هویت و تم
- AuthProvider در `src/auth/AuthProvider.tsx` روی React Query بنا شده است.  
- تم (تاریک/روشن) در جوتای/لوکال ذخیره می‌شود و اگر کاربر لاگین باشد در پروفایل بک‌اند نیز به‌روز می‌شود.

## 5) ناوبری و UX
- سایدبار چسبنده روی دسکتاپ، هایلایت صفحهٔ فعال، آیکون + نام کوتاه.  
- موبایل: دکمهٔ همبرگری (☰) سایدبار تمام‌صفحه را باز می‌کند؛ بستن با ✕ یا کلیک پس‌زمینه.  
- دسکتاپ: سایدبار قابل جمع‌شدن است (⇤ بستن، ⇥ باز کردن).  
- لایت وزن و مینیمال؛ تمرکز روی خوانایی.

## 6) مسیرهای کلیدی
- `/dashboard` خلاصه تایمر/کار/پومودورو/پیام.
- `/planner` CRUD کارها.
- `/pomodoro` شروع/توقف و تاریخچه.
- `/timers` تایمرهای دستی.
- `/projects` لیست و جزییات پروژه.
- `/team` و `/team/[id]` تیم و چت.
- `/voice` و `/voice/[room]` اتاق‌های صوتی و URL سیگنالینگ.
- `/settings` پروفایل و تم.

## 7) تست سریع
- با `USE_MOCKS=true` همه چیز بدون سرور کار می‌کند.  
- برای اطمینان از تایپ‌ها: `npm run lint`.

## 8) اگر گیر کردید
- خطای 401 یا ریدایرکت لاگین در حالت موک را نادیده بگیرید (دادهٔ ساختگی).  
- خطای پروکسی معمولاً یعنی `USE_MOCKS=false` و سرور در دسترس نیست.

موفق باشید! هر تغییری که کردید، در همین فایل چند خط نکته اضافه کنید تا نفر بعدی راحت‌تر باشد.
